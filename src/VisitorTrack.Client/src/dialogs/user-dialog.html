<template>
  <ux-dialog>
    <ux-dialog-body>
      <form submit.delegate="save()" visitor-track-loading-form-indicator>
        <div class="modal is-active">
          <div class="modal-background"></div>
          <div class="modal-card dialog-card">
            <header class="modal-card-head">
              <p class="modal-card-title">${ model.id ? 'Edit' : 'New' } User</p>
            </header>
            <section class="modal-card-body">
              <div class="field">
                <label class="label">Display Name</label>
                <div class="control has-icons-left">
                  <input class="input" type="text" placeholder="Display name..." attach-focus="true" value.bind="model.displayName & validate">
                  <span class="icon is-small is-left">
                    <i class="oi" data-glyph="person"></i>
                  </span>
                </div>
                <p class="help is-danger"></p>
              </div>
              <div class="field">
                <label class="label">Email Address</label>
                <div class="control has-icons-left">
                  <input class="input" type="email" placeholder="Email Address..." value.bind="model.emailAddress & validate" readonly.bind="model.id">
                  <span class="icon is-small is-left">
                    <i class="oi" data-glyph="envelope-closed"></i>
                  </span>
                </div>
                <p class="help is-danger"></p>
              </div>
              <div class="field">
                <label class="label">Role</label>
                <div class="control">
                  <div class="select full-width">
                    <select class="full-width" value.bind="model.roleId">
                      <option repeat.for="role of roles | sortBy : 'name'" model.bind="role.id">${ role.name }</option>
                    </select>
                  </div>
                </div>
              </div>
            </section>
            <footer class="modal-card-foot">
              <button type="submit" class="button is-primary">
                <span class="icon">
                  <i class="oi" data-glyph="thumb-up"></i>
                </span>
                <span>${ model.id ? 'Update' : 'Create' }</span>
              </button>
              <button class="button" click.trigger="cancel()">
                <span class="icon">
                  <i class="oi" data-glyph="thumb-down"></i>
                </span>
                <span>Cancel</span>
              </button>
            </footer>
          </div>
        </div>
      </form>
    </ux-dialog-body>
  </ux-dialog>
</template>
